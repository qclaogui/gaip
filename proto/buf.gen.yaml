version: v1
managed:
  enabled: true
#  go_package_prefix:
#    default: github.com/qclaogui/golang-api-server/genproto
#    except:
#      - buf.build/googleapis/googleapis
#      - buf.build/grpc-ecosystem/grpc-gateway
#    # override:
#    #   buf.build/acme/weather: github.com/acme/weather/gen/proto/go

# Usage with local plugins (just run: make install-build-deps to install dependencies)
# replace path with your {GOBIN}/protoc-gen-go-v1.31.0. Example: /Users/Shared/code/golang/bin/protoc-gen-go-v1.31.0
plugins:
  - plugin: go
    out: ../genproto
    opt:
    - module=github.com/qclaogui/golang-api-server/genproto
    path: /Users/Shared/code/golang/bin/protoc-gen-go-v1.31.0
    protoc_path: /Users/Shared/code/golang/bin/protoc-24.3

  - plugin: go-grpc
    out: ../genproto
    opt:
    - module=github.com/qclaogui/golang-api-server/genproto
    - require_unimplemented_servers=false
    path: /Users/Shared/code/golang/bin/protoc-gen-go-grpc-v1.3.0
    protoc_path: /Users/Shared/code/golang/bin/protoc-24.3

  - plugin: go_gapic
    out: ../genproto
    opt:
    - go-gapic-package=github.com/qclaogui/golang-api-server/genproto/library/apiv1;library
    - metadata=false
    - module=github.com/qclaogui/golang-api-server/genproto
    - grpc-service-config=qclaogui/library/v1/library_grpc_service_config.json
    - release-level=alpha
    - transport=grpc+rest
    - rest-numeric-enums=true
    path: /Users/Shared/code/golang/bin/protoc-gen-go_gapic-v0.38.0
    protoc_path: /Users/Shared/code/golang/bin/protoc-24.3

  - plugin: grpc-gateway
    out: ../genproto
    opt:
    - module=github.com/qclaogui/golang-api-server/genproto
    - generate_unbound_methods=true
    path: /Users/Shared/code/golang/bin/protoc-gen-grpc-gateway-v2.17.1
    protoc_path: /Users/Shared/code/golang/bin/protoc-24.3

  - plugin: openapiv2
    out: ../third_party/gen/openapiv2
    opt:
    - logtostderr=true
    - generate_unbound_methods=true
    path: /Users/Shared/code/golang/bin/protoc-gen-openapiv2-v2.17.1
    protoc_path: /Users/Shared/code/golang/bin/protoc-24.3
