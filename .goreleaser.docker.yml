# https://goreleaser.com/customization/docker/
dockers:
- image_templates:
  - "qclaogui/golang-api-server:{{.Version}}-amd64"
  dockerfile: Dockerfile.goreleaser
  build_flag_templates:
  - "--pull"
  - "--label=org.opencontainers.image.title=gaip"
  - "--label=org.opencontainers.image.source={{.GitURL}}"
  - "--label=org.opencontainers.image.revision={{.FullCommit}}"
  - "--label=org.opencontainers.image.description=Practices for implementing Google API Improvement Proposals (AIP) in Go."
  - "--platform=linux/amd64"
  goos: linux
  goarch: amd64
  goamd64: v4
  skip_push: true
- image_templates:
  - "qclaogui/golang-api-server:{{.Version}}-arm64"
  dockerfile: Dockerfile.goreleaser
  build_flag_templates:
  - "--pull"
  - "--label=org.opencontainers.image.title=gaip"
  - "--label=org.opencontainers.image.source={{.GitURL}}"
  - "--label=org.opencontainers.image.revision={{.FullCommit}}"
  - "--label=org.opencontainers.image.description=Practices for implementing Google API Improvement Proposals (AIP) in Go."
  - "--platform=linux/arm64"
  goos: linux
  goarch: arm64
  skip_push: true


docker_manifests:
- name_template: "qclaogui/golang-api-server:{{.Version}}"
  image_templates:
  - "qclaogui/golang-api-server:{{.Version}}-amd64"
  - "qclaogui/golang-api-server:{{.Version}}-arm64"
  skip_push: true
- name_template: "qclaogui/golang-api-server:latest"
  image_templates:
  - "qclaogui/golang-api-server:{{.Version}}-amd64"
  - "qclaogui/golang-api-server:{{.Version}}-arm64"
  skip_push: true
